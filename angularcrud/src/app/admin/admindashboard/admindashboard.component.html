<div *ngIf="loading | async">

</div>
<h1>this is dashboard for admin</h1>


<div *ngIf="error | async as error">
    <p>{{error}}</p>
    <button (click)="ngOnInit()">retry</button>
</div>



<div *ngIf="!(error | async)">
    <div>
        <button (click)="addUser()">
            add new user
        </button>
    </div>
    <table>
        <thead>
            <tr>
                <th>name</th>
                <th>email</th>
                <th>action</th>
            </tr>
        </thead>
    </table>
    <tbody *ngIf="(users | async) as userList; else noUser">
        <tr *ngFor="let user of userList">
            <td>{{user.name}}</td>
            <td>{{user.email}}</td>
            <td>
                <div>
                    <button (click)="editUser(user)">edit</button>
                    <!-- <button (click)="deleteUser(user.email)">delete</button> -->
                    <button mat-button color="warn" (click)="openDeleteConfirmation(user.email)">Delete</button>

                </div>
            </td>
        </tr>
        
    </tbody>

    <ng-template #noUser>
        <p>no users found</p>
    </ng-template>
    
</div>
<!-- <app-app-user (closeModalEvent)="closeAddUser($event)" *ngIf="addUsershowmodal"></app-app-user> -->
<app-add-user (closeModalEvent)="closeAddUser( $event )" *ngIf="addUsershowmodal"></app-add-user>
<app-edit-user *ngIf="editUsershowmodal" [currentUser]="usertoEdit" (closeModalEvent)="closeEditUser( $event )"></app-edit-user>
